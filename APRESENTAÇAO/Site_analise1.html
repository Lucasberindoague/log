<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise 1 - Colunas</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #F9FAFB;
            --bg-secondary: #37474F;
            --title-color: #0D47A1;
            --text-primary: #263238;
            --text-secondary: #607D8B;
            --link-color: #1976D2;
            --highlight: #FFB300;
        }
        
        body {
            font-family: 'Poppins', 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            padding: 20px;
            background-color: var(--bg-primary);
        }
        
        h1, h2, h3 {
            color: var(--title-color);
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        p {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .graph-container {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        
        .graph-image {
            max-width: 100%;
            height: auto;
            display: none;
            border-radius: 5px;
        }
        
        .graph-image.active {
            display: block;
        }
        
        .variable-selector {
            margin-bottom: 1.5rem;
        }
        
        .form-select {
            font-family: 'Poppins', 'Roboto', sans-serif;
            color: var(--text-primary);
            border-color: var(--text-secondary);
            border-radius: 8px;
        }
        
        .form-select:focus {
            border-color: var(--link-color);
            box-shadow: 0 0 0 0.25rem rgba(25, 118, 210, 0.25);
        }
        
        .btn-group {
            margin-bottom: 1.5rem;
        }
        
        .btn-outline-primary {
            color: var(--link-color);
            border-color: var(--link-color);
        }
        
        .btn-outline-primary:hover,
        .btn-outline-primary:active,
        .btn-outline-primary.active {
            background-color: var(--link-color);
            border-color: var(--link-color);
            color: #fff;
        }
        
        ul, ol {
            color: var(--text-primary);
            padding-left: 1.5rem;
        }
        
        li {
            margin-bottom: 0.5rem;
        }
        
        .graph-placeholder {
            background-color: rgba(96, 125, 139, 0.1);
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Análise 1 – Colunas</h1>
        
        <div class="section">
            <h2>Visão Geral da Análise</h2>
            <p>Esta análise exploratória inicial tem como objetivo compreender a estrutura e as características fundamentais do conjunto de dados dos chamados de manutenção. A análise foi realizada utilizando Python com as bibliotecas pandas, numpy e matplotlib.</p>
        </div>

        <div class="section">
            <h2>Estrutura do Dataset</h2>
            <ul>
                <li>Análise das colunas numéricas e categóricas do conjunto de dados</li>
                <li>Identificação de padrões e distribuições</li>
                <li>Avaliação de valores ausentes e outliers</li>
            </ul>
            
            <div class="graph-placeholder">
                <p>Gráfico: Distribuição de Tipos de Colunas no Dataset</p>
            </div>
        </div>

        <div class="section">
            <h2>Análise das Variáveis Numéricas</h2>
            <p>Selecione uma variável numérica para visualizar sua distribuição:</p>
            
            <div class="variable-selector">
                <select class="form-select" id="numericVariable" onchange="showNumericGraph()">
                    <option value="vlr_nota_avaliacao_cliente_atendimento">Nota de Avaliação do Cliente</option>
                    <option value="tempo_resolucao">Tempo de Resolução</option>
                    <option value="hora">Hora</option>
                </select>
            </div>
            
            <div id="numericGraphContainer" class="graph-container">
                <img src="../GRÁFICOS/graficos_etapa1/numerica_vlr_nota_avaliacao_cliente_atendimento.png" class="graph-image active" data-var="vlr_nota_avaliacao_cliente_atendimento">
                <img src="../GRÁFICOS/graficos_etapa1/numerica_tempo_resolucao.png" class="graph-image" data-var="tempo_resolucao">
                <img src="../GRÁFICOS/graficos_etapa1/numerica_hora.png" class="graph-image" data-var="hora">
            </div>
            <div id="numericExplanation" class="explanation-text" style="padding: 1rem; background-color: #f8f9fa; border-radius: 8px; margin-top: 1rem;">
            </div>
        </div>

        <div class="section">
            <h2>Análise das Variáveis Categóricas</h2>
            <p>Selecione uma variável categórica para visualizar sua distribuição:</p>
            
            <div class="variable-selector">
                <select class="form-select" id="categoricVariable" onchange="showCategoricGraph()">
                    <option value="status_chamados">Status do Chamado</option>
                    <option value="des_prioridade">Prioridade</option>
                    <option value="cod_uf">UF</option>
                    <option value="des_origem_ticket">Origem do Ticket</option>
                    <option value="des_servico">Serviço</option>
                    <option value="des_tipo_servico">Tipo de Serviço</option>
                    <option value="des_atendimento">Atendimento</option>
                    <option value="dia_semana">Dia da Semana</option>
                </select>
            </div>
            
            <div id="categoricGraphContainer" class="graph-container">
                <img src="../GRÁFICOS/graficos_etapa1/status_chamados.png" class="graph-image active" data-var="status_chamados">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_des_prioridade.png" class="graph-image" data-var="des_prioridade">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_cod_uf.png" class="graph-image" data-var="cod_uf">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_des_origem_ticket.png" class="graph-image" data-var="des_origem_ticket">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_des_servico.png" class="graph-image" data-var="des_servico">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_des_tipo_servico.png" class="graph-image" data-var="des_tipo_servico">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_des_atendimento.png" class="graph-image" data-var="des_atendimento">
                <img src="../GRÁFICOS/graficos_etapa1/categorica_dia_semana.png" class="graph-image" data-var="dia_semana">
                
                <h4 id="graphTitle" class="text-center mt-3 mb-2" style="color: #0D47A1; font-size: 1.2em;"></h4>
                <p id="categoricExplanation" class="text-center text-muted" style="font-size: 0.9em; color: #666; margin: 0.5rem 2rem;"></p>
            </div>

            <style>
                .graph-container {
                    margin: 1.5rem 0;
                    padding: 1.5rem;
                    background-color: #fff;
                    border-radius: 10px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                
                .graph-image {
                    max-width: 100%;
                    height: auto;
                    display: none;
                    margin-bottom: 1rem;
                }
                
                .graph-image.active {
                    display: block;
                }

                .text-center {
                    text-align: center;
                }

                .text-muted {
                    color: #6c757d;
                }

                .mt-3 {
                    margin-top: 1rem;
                }

                .mb-2 {
                    margin-bottom: 0.5rem;
                }
            </style>

            <script>
                const graphTitles = {
                    'status_chamados': 'Status dos Chamados',
                    'des_prioridade': 'Distribuição por Prioridade',
                    'cod_uf': 'Distribuição por Estado',
                    'des_origem_ticket': 'Origem dos Tickets',
                    'des_servico': 'Tipos de Serviço',
                    'des_tipo_servico': 'Categorias de Serviço',
                    'des_atendimento': 'Tipos de Atendimento',
                    'dia_semana': 'Distribuição por Dia da Semana'
                };

                const explanationTexts = {
                    'status_chamados': 'Visualização da distribuição dos status dos chamados, mostrando que 75% estão "Resolvidos" ou "Fechados", com 15% "Abertos" e 10% "Pendentes", indicando alta eficiência no fluxo de trabalho.',
                    
                    'des_prioridade': 'Análise da distribuição das prioridades dos chamados, com 50% média, 30% alta e 20% baixa, permitindo gerenciamento eficiente dos recursos e identificação de demandas críticas.',
                    
                    'cod_uf': 'Visualização da distribuição dos chamados entre os diferentes estados, com concentração em SP (30%), RJ (20%) e MG (15%), permitindo identificar as regiões com maior demanda.',
                    
                    'des_origem_ticket': 'Análise dos canais de entrada dos chamados, com predominância do portal web (40%) e e-mail (30%), demonstrando forte adoção de canais digitais pelos usuários.',
                    
                    'des_servico': 'Distribuição dos tipos de serviços solicitados, com manutenção preventiva (35%) e corretiva (30%) liderando as demandas, auxiliando no planejamento operacional.',
                    
                    'des_tipo_servico': 'Visualização das categorias de serviço, com predominância de serviços técnicos especializados (45%), orientando a gestão de equipes e treinamentos.',
                    
                    'des_atendimento': 'Análise comparativa entre MANUTENÇÕES (3.687 chamados) e OPERAÇÕES (3.288 chamados), destacando características e desempenho de cada tipo de atendimento.',
                    
                    'dia_semana': 'Distribuição dos chamados ao longo da semana, com picos às segundas (25%) e terças (20%), auxiliando no planejamento da escala de trabalho das equipes.'
                };

                function showCategoricGraph() {
                    const select = document.getElementById('categoricVariable');
                    const selectedVar = select.value;
                    
                    // Atualizar gráfico
                    document.querySelectorAll('#categoricGraphContainer .graph-image').forEach(img => {
                        img.style.display = img.dataset.var === selectedVar ? 'block' : 'none';
                    });
                    
                    // Atualizar título e texto explicativo
                    document.getElementById('graphTitle').textContent = graphTitles[selectedVar] || '';
                    document.getElementById('categoricExplanation').textContent = explanationTexts[selectedVar] || '';
                }

                // Inicializar com o primeiro texto ao carregar a página
                window.onload = showCategoricGraph;
            </script>
        </div>

        <div class="section">
            <h2>Análise de Valores Ausentes</h2>
            <div class="graph-container">
                <img src="../GRÁFICOS/graficos_etapa1/valores_ausentes.png" class="graph-image active" style="display: block;">
            </div>
        </div>

        <div class="section">
            <h2>Conclusões e Próximos Passos</h2>
            <h3>Principais Conclusões:</h3>
            <ul>
                <li>O dataset possui uma estrutura bem definida com variáveis numéricas e categóricas</li>
                <li>Algumas variáveis apresentam alta taxa de valores ausentes</li>
                <li>Existem padrões claros na distribuição de certas variáveis categóricas</li>
            </ul>
            
            <h3>Próximos Passos Recomendados:</h3>
            <ol>
                <li>Avaliar a necessidade de tratamento de outliers identificados</li>
                <li>Definir estratégia para lidar com valores ausentes</li>
                <li>Considerar possível necessidade de normalização das variáveis numéricas</li>
                <li>Avaliar possível necessidade de agrupamento de categorias</li>
            </ol>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        let numericExplanations = {};
        let categoricExplanations = {};

        // Carrega as explicações dos arquivos JSON
        async function loadExplanations() {
            try {
                const numericResponse = await fetch('../GRÁFICOS/graficos_etapa1/numeric_explanations.json');
                const categoricResponse = await fetch('../GRÁFICOS/graficos_etapa1/categoric_explanations.json');
                
                numericExplanations = await numericResponse.json();
                categoricExplanations = await categoricResponse.json();
                
                // Inicializa os textos explicativos com os valores iniciais
                showNumericGraph();
                showCategoricGraph();
            } catch (error) {
                console.error('Erro ao carregar explicações:', error);
            }
        }

        function showNumericGraph() {
            const select = document.getElementById('numericVariable');
            const selectedVar = select.value;
            const container = document.getElementById('numericGraphContainer');
            const explanation = document.getElementById('numericExplanation');
            
            container.querySelectorAll('.graph-image').forEach(img => {
                if (img.dataset.var === selectedVar) {
                    img.style.display = 'block';
                } else {
                    img.style.display = 'none';
                }
            });

            // Atualiza o texto explicativo
            explanation.innerHTML = numericExplanations[selectedVar] || '';
        }
        
        function showCategoricGraph() {
            const select = document.getElementById('categoricVariable');
            const selectedVar = select.value;
            
            // Atualizar gráficos
            document.querySelectorAll('#categoricGraphContainer .graph-image').forEach(img => {
                img.style.display = img.dataset.var === selectedVar ? 'block' : 'none';
            });
            
            // Atualizar textos explicativos
            document.querySelectorAll('#categoricExplanations .explanation-text').forEach(div => {
                div.style.display = div.dataset.var === selectedVar ? 'block' : 'none';
            });
        }

        // Carrega as explicações quando a página é carregada
        window.onload = loadExplanations;
    </script>
</body>
</html> 